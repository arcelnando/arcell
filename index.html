<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Album Digital Khirza - Premium Glow</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
/* Reset & Global */
html, body {
  margin:0; padding:0;
  font-family:'Poppins',sans-serif;
  height:100%; width:100%;
  overflow:hidden; /* Pastikan tidak ada scrollbar utama */
  background:linear-gradient(135deg,#ffd6e8,#ffb3d1,#ff99c7);
  display:flex; justify-content:center; align-items:center;
  color:#333; /* Warna teks default */
  line-height:1.6;
}

/* Particle Background */
#particleContainer{
  position:fixed; top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  overflow:hidden; z-index:0;
}
.particle{
  position:absolute; width:8px; height:8px;
  background:rgba(255,182,193,0.35);
  transform:rotate(45deg); border-radius:50%;
  animation-name:float; animation-timing-function:linear;
  animation-iteration-count:infinite;
  opacity:0; /* Mulai tersembunyi */
  animation-fill-mode:forwards; /* Pertahankan gaya akhir animasi */
}
@keyframes float{
  0%{transform:translate(0,0) rotate(45deg) scale(0.5);opacity:0;}
  20%{opacity:0.6;}
  80%{opacity:0.4;}
  100%{transform:translate(var(--x), var(--y)) rotate(45deg) scale(1.2);opacity:0;}
}

/* Navbar */
.navbar{
  position:fixed; top:0; left:0;
  width:100%;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(10px);
  display:flex; justify-content:center; align-items:center;
  padding:12px 0; z-index:1000;
  box-shadow:0 2px 15px rgba(0,0,0,0.1);
  display:none;
}
.navbar ul{
  list-style:none; display:flex; gap:35px; margin:0; padding:0;
}
.navbar button{
  background:none; border:none; color:white; font-size:1em;
  cursor:pointer; letter-spacing:1px; position:relative; transition:color 0.3s;
  font-weight:600;
}
.navbar button::after{
  content:''; position:absolute; left:0; bottom:-5px; width:0%; height:2px;
  background:#ffc0de; transition:width 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
.navbar button:hover{ color:#ffe3f1; }
.navbar button:hover::after{ width:100%; }
.menu-toggle{ display:none; flex-direction:column; cursor:pointer; position:absolute; right:20px; top:14px; }
.menu-toggle span{ width:25px; height:3px; background:white; margin:4px 0; border-radius:2px; transition:0.3s; }
@media(max-width:700px){
  .navbar ul{ flex-direction:column; background:rgba(255,255,255,0.15);
    position:fixed; top:55px; right:-100%; width:60%; height:100vh;
    text-align:center; transition:right 0.4s ease; padding-top:60px;
    box-shadow:-5px 0 15px rgba(0,0,0,0.1);
  }
  .navbar ul.active{ right:0; }
  .menu-toggle{ display:flex; }
  .menu-toggle.active span:nth-child(1){ transform:rotate(-45deg) translate(-5px, 6px); }
  .menu-toggle.active span:nth-child(2){ opacity:0; }
  .menu-toggle.active span:nth-child(3){ transform:rotate(45deg) translate(-5px, -6px); }
}

/* Page */
.page{
  width:100%; height:100%;
  display:none; justify-content:center; align-items:center; flex-direction:column;
  opacity:0; transition:opacity 0.8s ease-in-out;
  position:absolute; top:0; left:0;
}
.active-page{ display:flex; opacity:1; }

/* Album */
.album-wrapper{ position:relative; text-align:center; width:90%; max-width:700px; z-index:2; opacity:0; transition:opacity 1.2s ease; }
.album-wrapper.show{ opacity:1; }
.folder-album-wrapper{ opacity:1; } /* Hilangkan efek fadeIn khusus album utama */
.romantic-text{ font-size:2em; margin-bottom:20px; text-shadow:0 0 20px rgba(255,255,255,0.6); color:#fff; font-weight:700; }
.album-container{
  position:relative; width:100%; height:650px;
  border-radius:25px; overflow:hidden;
  border:2px solid rgba(255,255,255,0.3);
  background:rgba(255,255,255,0.07);
  backdrop-filter:blur(12px);
  box-shadow:0 15px 35px rgba(0,0,0,0.3);
  touch-action:pan-x;
  display:flex; justify-content:center; align-items:center; /* Untuk centering loading spinner */
}
.photo{
  width:100%; height:100%; object-fit:cover; position:absolute; top:0; left:0;
  opacity:0; transition:opacity 1.3s ease-in-out, transform 1.3s ease-in-out, box-shadow 1.3s ease-in-out;
  border-radius:20px; box-shadow:0 0 0px rgba(255,192,222,0);
}
.photo.active{ opacity:1; z-index:2; transform:scale(1.03); box-shadow:0 0 40px rgba(255,192,222,0.6); }
.nav-btn{
  position:absolute; top:50%; transform:translateY(-50%);
  font-size:2em; color:white; background:rgba(255,255,255,0.2);
  border:none; border-radius:50%; width:50px; height:50px; cursor:pointer; z-index:3; transition:background 0.3s, transform 0.3s;
  display:flex; justify-content:center; align-items:center;
}
.nav-btn:hover{ background:rgba(255,255,255,0.4); transform:translateY(-50%) scale(1.1); }
.prev-btn{ left:10px; } .next-btn{ right:10px; }

/* Photo Indicator (Dihilangkan, tapi CSS-nya dipertahankan sebagai placeholder jika diperlukan) */
.photo-indicator{
  display:none; /* Sembunyikan indikator titik */
  justify-content:center; margin-top:15px; gap:8px; z-index:4;
}
.dot{
  width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,0.4);
  cursor:pointer; transition:all 0.3s; border:1px solid rgba(255,255,255,0.2);
}
.dot.active{
  background:#ffc0de; width:12px; height:12px;
  transform:scale(1.1); box-shadow:0 0 10px rgba(255,192,222,0.8);
}
.dot:hover{
  background:#ffb3d1; transform:scale(1.2);
}


/* Menu bawah foto */
.photo-menu{
  position:relative;
  margin-top:20px;
  display:flex; gap:20px; justify-content:center; background:rgba(255,255,255,0.15);
  padding:10px 20px; border-radius:25px; backdrop-filter:blur(10px); z-index:4;
  box-shadow:0 5px 15px rgba(0,0,0,0.1);
}
.photo-menu button{
  background:none; border:none; color:white; font-size:1em; cursor:pointer; transition:0.3s;
  position:relative; font-weight:600;
  display:flex; align-items:center; gap:5px;
}
.photo-menu button:hover{ color:#ffb3d1; transform:scale(1.05); }

/* Double Tap Like Animation */
.heart-anim {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    font-size: 5em;
    color: #ff3366; /* Merah muda cerah */
    opacity: 0;
    pointer-events: none;
    z-index: 5;
    animation: doubleTapHeart 0.8s ease-out forwards;
}

@keyframes doubleTapHeart {
    0% { transform: translate(-50%, -50%) scale(0.1); opacity: 0; }
    30% { transform: translate(-50%, -50%) scale(1.5); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
}


/* Info Box */
.info-box{ background: rgba(255,255,255,0.08); backdrop-filter: blur(10px);
  padding:30px; border-radius:20px; color:#fff; text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,0.3); max-width:500px;
  animation: fadeInScale 0.8s forwards ease-out;
}
.info-box h2{ color:#ffe3f1; font-weight:700; margin-bottom:15px; }
.info-box p{ font-size:1.1em; margin-bottom:10px; }
.info-box a{ color:#ffc0de; text-decoration:none; font-weight:bold; }
.info-box a:hover{ text-decoration:underline; }

/* Login */
#loginPage{
  width:100%; height:100%; display:flex; justify-content:center; align-items:center;
  flex-direction:column; z-index:1000;
}
#loginTitle{
  color:#fff; font-size:2.5em; margin-bottom:25px; text-shadow:0 0 25px rgba(255,255,255,0.8); text-align:center;
  font-weight:700; animation: bounceIn 1s ease-out;
}
#loginBox{
  background:rgba(255,255,255,0.1); backdrop-filter:blur(12px);
  padding:40px 30px; border-radius:25px; box-shadow:0 15px 40px rgba(0,0,0,0.3);
  display:flex; flex-direction:column; gap:20px; width:300px; max-width:90%;
  animation: fadeInScale 0.8s forwards ease-out 0.2s; opacity:0;
}
#loginBox input{
  padding:14px 18px; border-radius:18px; border:1px solid rgba(255,255,255,0.3); outline:none;
  font-size:1em; background:rgba(255,255,255,0.2); color:white;
  transition:border-color 0.3s, background 0.3s;
}
#loginBox input::placeholder{ color:rgba(255,255,255,0.7); }
#loginBox input:focus{ border-color:#ffb3d1; background:rgba(255,255,255,0.3); }
#loginBox button{
  padding:14px; border:none; border-radius:18px;
  background:#ff99c7; color:white; font-weight:bold; cursor:pointer; transition:0.3s;
  font-size:1.1em; box-shadow:0 5px 15px rgba(0,0,0,0.2);
}
#loginBox button:hover{ background:#ffb3d1; transform:translateY(-2px); box-shadow:0 7px 20px rgba(0,0,0,0.3); }
.show-pass{
  position:relative; color:#fff; font-size:0.9em; cursor:pointer; text-align:right; margin-top:-10px;
  transition:color 0.3s;
}
.show-pass:hover{ color:#ffc0de; }
#loginError{color:#ffb3b3; font-size:0.9em; text-align:center; display:none; margin-top:-10px;}

/* Welcome Message */
#welcomeMessage{
  background:rgba(255,255,255,0.1); backdrop-filter:blur(12px);
  padding:30px; border-radius:20px; color:#fff; text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,0.3); max-width:400px;
  animation: fadeInScale 0.8s forwards ease-out; opacity:0;
  display:none; flex-direction:column; gap:20px;
}
#welcomeMessage h2{ font-size:2em; color:#ffe3f1; margin-bottom:10px; }
#welcomeMessage p{ font-size:1.1em; }
#welcomeMessage button{
  padding:12px 25px; border-radius:15px; border:none;
  background:#ff99c7; color:white; font-weight:bold; cursor:pointer; transition:0.3s;
  font-size:1em; box-shadow:0 5px 15px rgba(0,0,0,0.2);
}
#welcomeMessage button:hover{ background:#ffb3d1; transform:translateY(-2px); box-shadow:0 7px 20px rgba(0,0,0,0.3); }

/* Tombol Kembali */
.back-btn{
  position:fixed; top:20px; left:20px; z-index:100;
  padding:10px 15px; border-radius:10px; border:none;
  background:rgba(255,255,255,0.2); backdrop-filter:blur(5px);
  color:white; font-weight:bold; cursor:pointer; transition:0.3s, transform 0.3s;
  box-shadow:0 2px 10px rgba(0,0,0,0.1);
  display:flex; align-items:center; gap:5px;
}
.back-btn:hover{ background:rgba(255,255,255,0.4); transform:translateY(-2px); }

/* Tombol Folder */
.folder-btn{
  padding:18px 25px; border:none; border-radius:20px;
  background:#ff99c7; color:white; font-weight:bold; cursor:pointer; transition:0.3s;
  font-size:1.2em; letter-spacing:1px;
  box-shadow:0 5px 20px rgba(0,0,0,0.2);
  display:flex; justify-content:center; align-items:center;
  gap:10px;
  animation: fadeInScale 0.6s forwards ease-out; opacity:0;
}
.folder-btn:hover{ background:#ffb3d1 !important; transform:scale(1.03) translateY(-3px); box-shadow:0 8px 25px rgba(0,0,0,0.3); }
#folder1Btn{ animation-delay:0.2s; }
#folder2Btn{ animation-delay:0.4s; }

/* Loading Spinner */
.loading-spinner {
  border: 4px solid rgba(255, 255, 255, 0.3);
  border-top: 4px solid #ffc0de;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1; /* Di bawah foto, tapi di atas container */
}
@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Fallback Image Style */
.fallback-img {
    background-color: #f0f0f0;
    color: #888;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    text-align: center;
    border-radius: 20px;
    border: 2px dashed #ccc;
}


/* Animations */
@keyframes fadeInScale {
  0% { opacity: 0; transform: scale(0.9); }
  100% { opacity: 1; transform: scale(1); }
}
@keyframes bounceIn {
  0% { opacity: 0; transform: scale(0.3); }
  50% { opacity: 1; transform: scale(1.05); }
  70% { transform: scale(0.9); }
  100% { transform: scale(1); }
}

/* Responsive */
@media(max-width:600px){
  .romantic-text{ font-size:1.8em; margin-bottom:15px; }
  .album-container{ height:400px; border-radius:15px; }
  .photo{ border-radius:10px; }
  .nav-btn{ width:40px; height:40px; font-size:1.5em; }
  .prev-btn{ left:5px; } .next-btn{ right:5px; }
  .back-btn{ top:10px; left:10px; padding:8px 12px; font-size:0.9em; }
  #loginTitle{ font-size:2em; margin-bottom:20px; }
  #loginBox{ padding:30px 20px; }
  .folder-btn{ font-size:1em; padding:12px 20px; }
  .photo-menu{ margin-top:15px; padding:8px 15px; }
  .photo-menu button{ font-size:0.9em; }
  #welcomeMessage h2{ font-size:1.8em; }
  #welcomeMessage p{ font-size:1em; }
}
</style>
</head>
<body>

<div id="particleContainer"></div>

<nav class="navbar">
  <div class="menu-toggle" id="menuToggle"><span></span><span></span><span></span></div>
  <ul id="navMenu">
    <li><button id="homeBtn">Home</button></li>
    <li><button id="aboutBtn">About</button></li>
    <li><button id="contactBtn">Contact</button></li>
  </ul>
</nav>

<div class="page active-page" id="loginPage">
  <div id="loginTitle">ğ—Ÿğ—¢ğ—šğ—œğ—¡ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—Ÿğ—œğ—›ğ—”ğ—§ ğ—”ğ—Ÿğ—•ğ—¨ğ— </div>
  <div id="loginBox">
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <div class="show-pass" id="togglePass">Show Password</div>
    <button id="loginBtn">Login</button>
    <div id="loginError">Username atau Password salah!</div>
  </div>
</div>

<div class="page" id="welcomePage">
  <div id="welcomeMessage">
    <h2>Selamat Datang! âœ¨</h2>
    <p>Halo <span id="displayUsername"></span>, senang Anda kembali! Jelajahi momen spesial dalam album digital ini.</p>
    <button id="startBrowsingBtn">Mulai Jelajahi Album</button>
  </div>
</div>

<div class="page" id="homePage">
  <div class="album-wrapper" id="folderSelectWrapper" style="display:flex; flex-direction:column; gap:20px; max-width:400px; padding:20px; opacity:1;">
    <div class="romantic-text" style="margin-bottom:0;">ğ—£ğ—œğ—Ÿğ—œğ—› ğ—™ğ—¢ğ—Ÿğ——ğ—˜ğ—¥ ğ—”ğ—Ÿğ—•ğ—¨ğ— </div>
    <button id="mainAlbumBtn" class="folder-btn">
        <span class="icon"></span> ALBUM UTAMA
    </button>
    <button id="folder1Btn" class="folder-btn">
        <span class="icon"></span> PAP RANDOM 1
    </button>
    <button id="folder2Btn" class="folder-btn">
        <span class="icon"></span> PAP RANDOM 2 
    </button>
  </div>
  
  <div class="album-wrapper" id="albumWrapper" style="display:none;">
    <button class="back-btn" onclick="showPage('home')">&#10094; KEMBALI</button>
    <div class="romantic-text">ğ’ğ–ğˆğğ„ ğ”ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—Ÿğ—œğ—›ğ€ğ—§ ğ…ğ—¢ğ—§ğ—¢ ğ’ğ„ğ—Ÿğ—”ğ—¡ğ—ğ”ğ—§ğ—¡ğ—¬ğ€</div>
    <div class="album-container" id="albumContainer">
      <div class="loading-spinner" id="mainSpinner"></div>
    </div>
    <div class="photo-indicator" id="mainPhotoIndicator"></div> <div class="photo-menu" id="photoMenu">
      <button id="shareBtn" onclick="sharePhoto('main')"><span class="icon"></span> Share</button>
      <button id="likeBtn" onclick="toggleLike('main')"><span class="icon"></span> Like</button>
      <button id="downloadBtn" onclick="downloadPhoto('main')"><span class="icon"></span> Download</button>
    </div>
    <button class="nav-btn prev-btn" id="prevBtn">&#10094;</button>
    <button class="nav-btn next-btn" id="nextBtn">&#10095;</button>
  </div>
</div>

<div class="page" id="folder1Page">
  <button class="back-btn" onclick="showPage('home')">&#10094; KEMBALI</button>
  <div class="album-wrapper folder-album-wrapper" data-folder="folder1">
    <div class="romantic-text">ğ…ğğ‹ğƒğ„ğ‘ ğŸ - ğ’ğ–ğˆğğ„ ğ”ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—Ÿğ—œğ—›ğ€ğ—§ ğ…ğ—¢ğ—§ğ—¢</div>
    <div class="album-container folder-album-container" id="folder1Container">
      <div class="loading-spinner" id="folder1Spinner"></div>
    </div>
    <div class="photo-indicator folder-photo-indicator" id="folder1Indicator"></div> <div class="photo-menu">
      <button onclick="sharePhoto('folder1')"><span class="icon"></span> Share</button>
      <button onclick="toggleLike('folder1')"><span class="icon"></span> Like</button>
      <button onclick="downloadPhoto('folder1')"><span class="icon"></span> Download</button>
    </div>
    <button class="nav-btn prev-btn" onclick="navPhoto('folder1', -1)">&#10094;</button>
    <button class="nav-btn next-btn" onclick="navPhoto('folder1', 1)">&#10095;</button>
  </div>
</div>

<div class="page" id="folder2Page">
  <button class="back-btn" onclick="showPage('home')">&#10094; KEMBALI</button>
  <div class="album-wrapper folder-album-wrapper" data-folder="folder2">
    <div class="romantic-text">ğ…ğğ‹ğƒğ„ğ‘ ğŸ - ğ’ğ–ğˆğğ„ ğ”ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—Ÿğ—œğ—›ğ€ğ—§ ğ…ğ—¢ğ—§ğ—¢</div>
    <div class="album-container folder-album-container" id="folder2Container">
      <div class="loading-spinner" id="folder2Spinner"></div>
    </div>
    <div class="photo-indicator folder-photo-indicator" id="folder2Indicator"></div> <div class="photo-menu">
      <button onclick="sharePhoto('folder2')"><span class="icon"></span> Share</button>
      <button onclick="toggleLike('folder2')"><span class="icon"></span> Like</button>
      <button onclick="downloadPhoto('folder2')"><span class="icon"></span> Download</button>
    </div>
    <button class="nav-btn prev-btn" onclick="navPhoto('folder2', -1)">&#10094;</button>
    <button class="nav-btn next-btn" onclick="navPhoto('folder2', 1)">&#10095;</button>
  </div>
</div>

<div class="page" id="aboutPage">
  <button class="back-btn" onclick="showPage('home')">&#10094; KEMBALI</button>
  <div class="info-box">
    <h2>About</h2>
    <p>Developer: <strong>Nando Developers</strong></p>
    <p>ğ€ğ‹ğğ—¨ğ—  ğƒğˆğ—šğ—œğ—§ğ€ğ—Ÿ ğğ˜ ğ‚ğ„ğ—Ÿğ—­</p>
    <p>Versi: 1.2
  </div>
</div>

<div class="page" id="contactPage">
  <button class="back-btn" onclick="showPage('home')">&#10094; KEMBALI</button>
  <div class="info-box">
    <h2>Contact</h2>
    <p>Email: <a href="mailto:arcelbussines@email.com">arcelbussines@email.com</a></p>
    <p>Telegram: <a href="https://t.me/humans26" target="_blank">@humans26</a></p>
    <p>Jangan sungkan untuk menghubungi kami!</p>
  </div>
</div>

<audio id="bgMusic" src="https://h.top4top.io/m_35969emdf0.m4a" loop></audio>

<script>
// Navbar toggle
const navMenu = document.getElementById('navMenu');
const menuToggle = document.getElementById('menuToggle');
menuToggle.addEventListener('click',()=> {
  navMenu.classList.toggle('active');
  menuToggle.classList.toggle('active');
});

// Pages (Diperbarui)
const pages = { 
  login: document.getElementById('loginPage'), 
  welcome: document.getElementById('welcomePage'), // Halaman selamat datang baru
  home: document.getElementById('homePage'), 
  folder1: document.getElementById('folder1Page'),
  folder2: document.getElementById('folder2Page'),
  about: document.getElementById('aboutPage'), 
  contact: document.getElementById('contactPage') 
};

// Data Album
const albumData = {
  main: {
    photos: [
      "https://images2.imgbox.com/07/6d/flAblCPU_o.jpg",
      "https://images2.imgbox.com/8a/48/5WnFlheI_o.jpg",
      "https://images2.imgbox.com/17/93/x3zJwzr8_o.jpg",
      "https://images2.imgbox.com/9f/c4/0HZK3fj6_o.jpg",
      "https://images2.imgbox.com/d4/f3/y30RHo1v_o.jpg",
      "https://images2.imgbox.com/d0/ef/utCLLETK_o.jpg",
      "https://images2.imgbox.com/6d/9d/TfuuSkGT_o.jpg",
      "https://images2.imgbox.com/9b/14/1Nh4stjQ_o.jpg",
      "https://images2.imgbox.com/05/cf/2lmZVoK0_o.jpg",
      "https://images2.imgbox.com/17/ad/VpSegle2_o.jpg",
      "https://images2.imgbox.com/bf/38/j28lslL7_o.jpg",
      "https://images2.imgbox.com/2d/5d/THVip0wB_o.jpg",
      "https://images2.imgbox.com/d1/42/8VgLCjZp_o.jpg",
      "https://images2.imgbox.com/15/a4/Aj6Q76RP_o.jpg",
      "https://images2.imgbox.com/31/7d/DaZ3wHmd_o.jpg",
      "https://images2.imgbox.com/ac/73/goBnuRIx_o.jpg",
      "https://images2.imgbox.com/aa/b9/HsnXJMTE_o.jpg",
      "https://images2.imgbox.com/9d/1e/44qSzju4_o.jpg",
      "https://images2.imgbox.com/94/ec/28ile6qy_o.jpg",
      "https://images2.imgbox.com/b7/2c/3EgN6c1L_o.jpg",
      "https://images2.imgbox.com/09/6a/BJdQjfwc_o.jpg",
      "https://images2.imgbox.com/7a/11/Example22_o.jpg"
    ],
    current: 0,
    liked: false,
    container: document.getElementById('albumContainer'),
    indicator: document.getElementById('mainPhotoIndicator'),
    spinner: document.getElementById('mainSpinner'),
    likeBtnElement: null // Akan diisi saat init
  },
  folder1: {
    photos: [
      "https://files.catbox.moe/a8103e.jpg",
      "https://files.catbox.moe/xrgsju.jpg",
      "https://files.catbox.moe/66gyub.jpg",
      "https://files.catbox.moe/kwhj0y.jpg",
      "https://files.catbox.moe/53xopd.jpg",
      "https://files.catbox.moe/vavwon.jpg",
      "https://files.catbox.moe/qs8hz8.jpg",
      "https://files.catbox.moe/vye5u2.jpg",
      "https://files.catbox.moe/62lajf.jpg",
      "https://files.catbox.moe/ieldvp.jpg"
    ],
    current: 0,
    liked: false,
    container: null,
    indicator: null,
    spinner: null,
    likeBtnElement: null
  },
  folder2: {
    photos: [
      "https://files.catbox.moe/ieldvp.jpg",
      "https://files.catbox.moe/6ldfhh.jpg",
      "https://files.catbox.moe/250ug0.jpg",
      "https://files.catbox.moe/zklaxg.jpg",
      "https://files.catbox.moe/n5682x.jpg",
      "https://files.catbox.moe/rdgmp9.jpg"
    ],
    current: 0,
    liked: false,
    container: null,
    indicator: null,
    spinner: null,
    likeBtnElement: null
  }
};

let autoSwipeInterval;
let loggedInUsername = ''; 

// Login
const loginBtn = document.getElementById('loginBtn');
const loginError = document.getElementById('loginError');
const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const togglePass = document.getElementById('togglePass');
const albumWrapper = document.getElementById('albumWrapper'); 
const folderSelectWrapper = document.getElementById('folderSelectWrapper');
const music = document.getElementById('bgMusic');
const displayUsername = document.getElementById('displayUsername');
const startBrowsingBtn = document.getElementById('startBrowsingBtn');

togglePass.addEventListener('click', ()=>{
  passwordInput.type = (passwordInput.type==='password')?'text':'password'; 
  togglePass.textContent = (passwordInput.type==='password')?'Show Password':'Hide Password'; 
});

loginBtn.addEventListener('click', ()=>{
  const user = usernameInput.value.trim();
  const pass = passwordInput.value.trim();
  if(user==='zaza' && pass==='zaza'){ 
    loginError.style.display='none';
    document.querySelector('.navbar').style.display='flex';
    loggedInUsername = user; 
    displayUsername.textContent = user; 
    showPage('welcome'); // Pindah ke halaman welcome
    clearInterval(autoSwipeInterval); 
  } else {
    loginError.style.display='block';
  }
});

startBrowsingBtn.addEventListener('click', () => {
  showPage('home'); // Setelah welcome, langsung ke home (pemilihan folder)
});

// FUNGSI UTAMA UNTUK MENAMPILKAN HALAMAN
function showPage(page){
  for(const key in pages){ 
    pages[key].style.display = 'none';
    pages[key].classList.remove('active-page');
  }

  if (page === 'home' || page === 'mainAlbum') {
      pages['home'].style.display = 'flex';
      pages['home'].classList.add('active-page');
      
      if (page === 'home') {
           folderSelectWrapper.style.display = 'flex'; 
           albumWrapper.style.display = 'none';
           clearInterval(autoSwipeInterval); 
      } else { // page === 'mainAlbum'
           folderSelectWrapper.style.display = 'none';
           albumWrapper.style.display = 'block'; 
      }
  } else {
      pages[page].style.display = 'flex'; 
      pages[page].classList.add('active-page'); 
  }
  
  navMenu.classList.remove('active');
  menuToggle.classList.remove('active');

  if(page !== 'login' && page !== 'welcome' && page !== 'about' && page !== 'contact') playMusicIfAlbum();
}


// FUNGSI UNTUK MENAMPILKAN FOTO SPESIFIK DENGAN LOADING SPINNER DAN FALLBACK
function showPhoto(folder, i){
  const data = albumData[folder];
  data.current = i;
  if (!data.container) return; 

  data.container.innerHTML=''; 
  // Hapus semua elemen heart-anim yang mungkin tersisa
  data.container.querySelectorAll('.heart-anim').forEach(el => el.remove()); 

  if (data.spinner) data.spinner.style.display = 'block'; 

  const img=document.createElement('img');
  img.src=data.photos[i]; 
  img.className='photo'; 

  img.onload = () => {
    if (data.spinner) data.spinner.style.display = 'none'; 
    data.container.appendChild(img);
    setTimeout(() => img.classList.add('active'), 50); 
  };

  img.onerror = () => {
    if (data.spinner) data.spinner.style.display = 'none'; 
    const fallbackDiv = document.createElement('div');
    fallbackDiv.className = 'photo active fallback-img';
    fallbackDiv.textContent = 'Gambar tidak dapat dimuat ğŸ˜Ÿ';
    data.container.appendChild(fallbackDiv);
    console.error(`Gagal memuat gambar: ${data.photos[i]}`);
  };

  // updatePhotoIndicator(folder); // DIHAPUS (Permintaan user)
}

// Fungsi untuk navigasi foto (prev/next)
function navPhoto(folder, direction){
  const data = albumData[folder];
  data.current = (data.current + direction + data.photos.length) % data.photos.length;
  showPhoto(folder, data.current);
  resetAutoSwipe(folder);
}

// Inisialisasi Album Utama
function initMainAlbum(){
  albumData.main.spinner = document.getElementById('mainSpinner'); 
  albumData.main.likeBtnElement = document.getElementById('likeBtn'); // Inisialisasi elemen tombol like utama
  showPhoto('main', albumData.main.current);
  document.getElementById('prevBtn').onclick = () => navPhoto('main', -1);
  document.getElementById('nextBtn').onclick = () => navPhoto('main', 1);

  setupDoubleTap(albumData.main.container, 'main'); // Tambahkan double tap listener
  setupSwipe(albumData.main.container, 'main');
  startAutoSwipe('main');
  albumWrapper.classList.add('show');
  updateLikeButton(albumData.main.likeBtnElement, albumData.main.liked); 
}

// Inisialisasi Album Folder
function initFolderAlbum(folder){
    const data = albumData[folder];
    data.container = document.getElementById(`${folder}Container`);
    // data.indicator = document.getElementById(`${folder}Indicator`); // Dihilangkan
    data.spinner = document.getElementById(`${folder}Spinner`); 
    data.likeBtnElement = document.querySelector(`#${folder}Page .photo-menu button:nth-child(2)`); // Inisialisasi elemen tombol like folder

    
    if (data.photos.length > 0) {
        showPhoto(folder, data.current);
        setupDoubleTap(data.container, folder); // Tambahkan double tap listener
        setupSwipe(data.container, folder);
        startAutoSwipe(folder);
        if(data.likeBtnElement) updateLikeButton(data.likeBtnElement, data.liked);
    } else {
        data.container.innerHTML = '<div class="fallback-img active" style="font-size:1.5em; color:#ffb3b3;">Folder ini kosong!</div>';
        if (data.spinner) data.spinner.style.display = 'none';
        // if (data.indicator) data.indicator.innerHTML = ''; // Dihilangkan
    }
}

// Photo Indicator (Dots) - Fungsi dinonaktifkan
// function updatePhotoIndicator(folder){ ... }


// Folder Selection Buttons
document.getElementById('mainAlbumBtn').onclick = ()=>{
    showPage('mainAlbum'); 
    initMainAlbum();
};
document.getElementById('folder1Btn').onclick = ()=>{
    showPage('folder1');
    initFolderAlbum('folder1');
};
document.getElementById('folder2Btn').onclick = ()=>{
    showPage('folder2');
    initFolderAlbum('folder2');
};

// Auto Swipe Logic
function startAutoSwipe(folder){
  clearInterval(autoSwipeInterval); 
  if (albumData[folder].photos.length > 1) { 
    autoSwipeInterval = setInterval(()=>{ navPhoto(folder, 1); }, 5000);
  }
}

function resetAutoSwipe(folder){
  clearInterval(autoSwipeInterval);
  startAutoSwipe(folder);
}

// Swipe Setup
function setupSwipe(element, folder){
  let startX=0;
  element.addEventListener('touchstart',e=>startX=e.touches[0].clientX);
  element.addEventListener('touchend',e=>{
    const endX = e.changedTouches[0].clientX;
    // Cek apakah itu swipe (lebih dari 50px)
    if(Math.abs(endX - startX) > 50) { 
      if(endX-startX>50) navPhoto(folder, -1);
      if(startX-endX>50) navPhoto(folder, 1);
    }
  });
}

// Double Tap Setup (untuk Like Animation)
let lastTap = 0;
function setupDoubleTap(element, folder) {
    // Listener untuk perangkat sentuh (Double Tap)
    element.addEventListener('touchstart', e => {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 300 && tapLength > 0) {
            // Double Tap terdeteksi
            e.preventDefault(); // Mencegah zoom/scroll
            handleLikeAction(folder);
        }
        lastTap = currentTime;
    });

    // Listener untuk desktop (Double Click)
    element.addEventListener('dblclick', e => {
        e.preventDefault();
        handleLikeAction(folder);
    });
}

// Fungsi untuk menampilkan animasi hati
function showHeartAnimation(container) {
    const heart = document.createElement('div');
    heart.classList.add('heart-anim');
    heart.textContent = 'â¤ï¸'; 
    container.appendChild(heart);

    // Hapus elemen setelah animasi selesai (1 detik)
    setTimeout(() => {
        heart.remove();
    }, 800);
}

// Fungsi yang menangani aksi Like
function handleLikeAction(folder) {
    const data = albumData[folder];
    if (data.photos.length === 0) return; // Jangan lakukan apa-apa jika album kosong

    // 1. Tampilkan animasi hati
    showHeartAnimation(data.container);

    // 2. Perbarui status Like (jika belum disukai, jadikan disukai)
    if (!data.liked) {
        data.liked = true;
        updateLikeButton(data.likeBtnElement, data.liked);
        // Opsi: Tampilkan alert setelah animasi selesai
        // setTimeout(() => { alert('Anda menyukai foto ini! â¤ï¸'); }, 500);
    }
}


// Navbar buttons
document.getElementById('homeBtn').onclick=()=>showPage('home');
document.getElementById('aboutBtn').onclick=()=>showPage('about');
document.getElementById('contactBtn').onclick=()=>showPage('contact');

// Particle (Lebih dinamis)
const particleContainer = document.getElementById('particleContainer');
function createParticle() {
  const p = document.createElement('div');
  p.classList.add('particle');
  const size = Math.random() * 10 + 5; 
  const duration = Math.random() * 8 + 4; 
  const delay = Math.random() * 5; 
  
  const startEdge = Math.floor(Math.random() * 4); 
  let startX, startY;
  
  if (startEdge === 0) { 
      startX = Math.random() * window.innerWidth;
      startY = -size;
  } else if (startEdge === 1) { 
      startX = window.innerWidth + size;
      startY = Math.random() * window.innerHeight;
  } else if (startEdge === 2) { 
      startX = Math.random() * window.innerWidth;
      startY = window.innerHeight + size;
  } else { 
      startX = -size;
      startY = Math.random() * window.innerHeight;
  }

  const endX = startX + (Math.random() * 400 - 200); 
  const endY = startY + (Math.random() * 400 - 200); 

  p.style.setProperty('--x', `${endX - startX}px`);
  p.style.setProperty('--y', `${endY - startY}px`);
  p.style.width = `${size}px`;
  p.style.height = `${size}px`;
  p.style.animationDuration = `${duration}s`;
  p.style.animationDelay = `${delay}s`;
  p.style.left = `${startX}px`;
  p.style.top = `${startY}px`;
  
  particleContainer.appendChild(p);

  p.addEventListener('animationend', () => {
      p.remove();
      createParticle(); 
  });
}

for(let i=0;i<50;i++){ 
  createParticle();
}


// Photo menu actions
function updateLikeButton(button, isLiked){
  const icon = button.querySelector('.icon');
  if(icon){
    icon.textContent = isLiked ? 'â¤ï¸' : 'ğŸ¤';
  }
}

function toggleLike(folder){
  const data = albumData[folder];
  if (data.photos.length === 0) return;

  data.liked = !data.liked;
  
  // Ambil tombol like yang benar
  const likeBtn = data.likeBtnElement;
  
  if(likeBtn) updateLikeButton(likeBtn, data.liked);
  
  // Jika menjadi like, tampilkan animasi hati
  if(data.liked) {
    showHeartAnimation(data.container);
  }

  alert(data.liked ? 'Anda menyukai foto ini! â¤ï¸' : 'Anda membatalkan suka pada foto ini.');
}

function sharePhoto(folder){
  const data = albumData[folder];
  if (data.photos.length === 0) return alert('Folder ini kosong.');

  const url = encodeURIComponent(data.photos[data.current]);
  const text = encodeURIComponent(`Lihat foto ini di ${folder==='main'?'Album Digital Khirza':'Folder Album'}!`);
  
  const shareOptions = `
    Bagikan foto ini melalui:
    1. WhatsApp
    2. Twitter
    3. Facebook
    4. Telegram
    5. Salin Link
  `;
  const choice = prompt(shareOptions,'1');
  if(!choice) return;

  switch(choice){
    case '1': window.open(`https://wa.me/?text=${text}%20${url}`,'_blank'); break;
    case '2': window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`,'_blank'); break;
    case '3': window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`,'_blank'); break;
    case '4': window.open(`https://t.me/share/url?url=${url}&text=${text}`,'_blank'); break;
    case '5': 
        navigator.clipboard.writeText(data.photos[data.current])
            .then(() => alert('Link foto berhasil disalin!'))
            .catch(err => console.error('Gagal menyalin link:', err));
        break;
    default: alert('Pilihan tidak valid!'); break;
  }
}

function downloadPhoto(folder){
  const data = albumData[folder];
  if (data.photos.length === 0) return alert('Folder ini kosong.');
  
  const downloadUrl = data.photos[data.current]; 
  
  const link = document.createElement('a');
  link.href = downloadUrl;
  link.download = `Khirza_Album_${folder}_${data.current+1}.jpg`; 
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  alert('Foto sedang diunduh! ğŸ“¥');
}

// Musik album otomatis play ketika halaman album
function playMusicIfAlbum(){
  music.play().catch(()=>{}); 
}

// Play music on first click (fallback)
document.body.addEventListener('click', ()=>{ music.play(); }, {once:true});
</script>
</body>
</html>
